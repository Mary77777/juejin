import React, { Component } from 'react';
import api from '@/api/detail'
import './scss/Detail.scss'
class Com extends Component {

  constructor (props) {
    super(props)
    this.state = {
      cont:'',
      msg:{},
      username:'',
      avatarLarge:'',
      visible: false,
      selected: ''
    }
  }
  onSelect = (opt) => {
    // console.log(opt.props.value);
    this.setState({
      visible: true,
      selected: opt.props.value,
    });
  };
  handleVisibleChange = (visible) => {
    this.setState({
      visible,
    });
  };
  componentDidMount () {
    const id = this.props.match.params.id
    // console.log(id)
    api.requestData(id).then(data => {
      // console.log(data.content)
      this.setState({
        cont: data.content
      })
    })
    api.requestData1(id).then(data => {
      // console.log(data)
      this.setState({
        username: data.user.username,
        avatarLarge: data.user.avatarLarge,
        msg: data
      })
    })
  }
  render () {
    return (
      <div className = "box">
        <header className = "header">
        
          <img src = {require('../images/logo.png')} alt='12' style={{}}/>

        </header>
        <div className = "content_m">
        <div className = 'ctop' style={{paddingTop:'.15rem'}}>
        <div style={{float:'left'}}>
            <img src={ this.state.avatarLarge } alt='' style={{borderRadius:'50%',height:'.4rem',width:'.4rem'}}/>
          </div>
          <div style={{paddingLeft:'.5rem',color:'#909090',fontSize:'.15rem'}}>
          <p style={{color: '#333',
    fontSize: '.15rem',
    fontWeight: '700',
    lineHeight: 'normal'}}>{ this.state.username }</p>
            <span>{ this.state.msg.createdAt }</span>&nbsp;阅读{ this.state.msg.viewsCount } 
          </div>
        </div>
          <div className="title">{ this.state.msg.title }</div>
          <div dangerouslySetInnerHTML={{__html : this.state.cont}} className="cet"></div>
        </div>
        <footer className = "footer" style={{backgroundColor:'#fff',border:'.1em solid #eee',padding:'0'}}>
          <ul style={{display:'flex',justifyContent:'space-around',alignItems:'center'}}>
            <li style={{color:'#999',paddingLeft:'.25rem',paddingTop:'.07rem'}}><svg className="icon" style={{fontWeight:'900', width: '1.3em', height: '1.3em',verticalAlign: 'middle',fill: 'currentColor',overflow: 'hidden',color:'#999'}} viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1399"><path d="M743.328 985.536l-316.704 0c-12.896 0-23.392-10.368-23.392-23.104s10.496-23.072 23.392-23.072l316.704 0c67.296 0 99.808-36.512 115.168-67.136 0.768-1.856 1.024-3.552 1.408-5.568 2.912-14.624 7.84-39.168 40.192-77.92 23.328-27.968 19.328-57.664 14.624-92.032-1.472-10.912-2.944-21.76-3.552-32.512-2.688-45.856 9.344-65.664 26.048-93.12 3.04-4.928 6.304-10.304 9.792-16.32 15.328-26.432 14.464-59.232-2.304-87.712-20.48-34.816-59.008-55.648-103.008-55.648-77.952 0-167.808 2.656-168.672 2.656-7.776 0.288-13.888-2.72-18.464-8-4.64-5.28-6.528-12.352-5.28-19.2 0.32-1.6 29.664-160.48 29.664-230.304 0-71.616-54.336-79.328-77.632-79.328-36.832 0-66.784 39.2-66.784 87.424 0 59.936 0 80.16-31.68 123.904-43.712 60.352-126.24 161.632-188.416 161.632L275.04 450.176l0 512.224c0 12.768-10.496 23.104-23.392 23.104L117.76 985.504c-49.056 0-88.992-39.392-88.992-87.808L28.768 491.808c0-48.384 39.904-87.776 88.992-87.776l196.704 0c27.84 0 89.696-58.496 150.304-142.272 22.976-31.712 22.976-39.168 22.976-97.088 0-74.944 49.856-133.6 113.536-133.6 57.408 0 124.448 32.896 124.448 125.504 0 56.128-16.8 160.576-25.44 210.656 33.184-0.8 89.856-1.952 141.408-1.952 60.864 0 114.56 29.376 143.488 78.624 25.216 42.88 26.144 92.928 2.464 133.792-3.68 6.336-7.104 11.968-10.272 17.184-15.52 25.472-21.344 35.008-19.488 66.656 0.576 9.568 1.952 19.296 3.232 29.024 5.088 37.408 11.424 83.968-24.896 127.488-24.832 29.792-28.192 46.496-30.432 57.536-1.056 5.28-2.176 10.752-4.928 16.256C870.336 952.544 814.56 985.536 743.328 985.536L743.328 985.536zM117.76 450.208c-23.232 0-42.176 18.656-42.176 41.6l0 405.952c0 22.976 18.944 41.632 42.176 41.632l110.496 0L228.256 450.208 117.76 450.208 117.76 450.208zM117.76 450.208" p-id="1400"></path></svg>&nbsp;{this.state.msg.collectionCount}</li><span style={{color:'#999',fontSize:'1.6em',paddingTop:'.3em',opacity:'.2'}}>|</span>
            <li style={{color:'#999',paddingTop:'.07rem'}}><svg className="icon" style={{width: '1.3em', height: '1.3em',verticalAlign: 'middle',fill: 'currentColor',overflow: 'hidden',color:'#999'}} viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="486"><path d="M131.253515 789.333333C87.810305 789.333333 52.51282 753.473975 52.51282 709.41763L52.51282 69.333333 26.25641 96 892.853331 96C936.231586 96 971.487179 131.853286 971.487179 175.915703L971.487179 816 997.74359 789.333333 525.128205 789.333333 517.234323 789.333333 510.649171 793.754413 285.912493 944.636066C273.815607 952.757562 270.491629 969.301024 278.488179 981.586923 286.484727 993.872821 302.773675 997.248736 314.87056 989.127241L539.607238 838.245587 525.128205 842.666667 997.74359 842.666667 1024 842.666667 1024 816 1024 175.915703C1024 102.41369 965.24899 42.666667 892.853331 42.666667L26.25641 42.666667 0 42.666667 0 69.333333 0 709.41763C0 782.925715 58.804881 842.666667 131.253515 842.666667L268.117303 842.666667C282.618319 842.666667 294.373713 830.727593 294.373713 816 294.373713 801.272407 282.618319 789.333333 268.117303 789.333333L131.253515 789.333333ZM367.589743 442.666667C367.589743 383.756294 320.568162 336 262.564102 336 204.560043 336 157.538461 383.756294 157.538461 442.666667 157.538461 501.577039 204.560043 549.333333 262.564102 549.333333 320.568162 549.333333 367.589743 501.577039 367.589743 442.666667ZM210.051282 442.666667C210.051282 413.211479 233.562074 389.333333 262.564102 389.333333 291.566133 389.333333 315.076924 413.211479 315.076924 442.666667 315.076924 472.121854 291.566133 496 262.564102 496 233.562074 496 210.051282 472.121854 210.051282 442.666667ZM630.153845 442.666667C630.153845 383.756294 583.132265 336 525.128205 336 467.124145 336 420.102564 383.756294 420.102564 442.666667 420.102564 501.577039 467.124145 549.333333 525.128205 549.333333 583.132265 549.333333 630.153845 501.577039 630.153845 442.666667ZM472.615386 442.666667C472.615386 413.211479 496.126176 389.333333 525.128205 389.333333 554.130236 389.333333 577.641026 413.211479 577.641026 442.666667 577.641026 472.121854 554.130236 496 525.128205 496 496.126176 496 472.615386 472.121854 472.615386 442.666667ZM892.717948 442.666667C892.717948 383.756294 845.696367 336 787.692307 336 729.688247 336 682.666667 383.756294 682.666667 442.666667 682.666667 501.577039 729.688247 549.333333 787.692307 549.333333 845.696367 549.333333 892.717948 501.577039 892.717948 442.666667ZM735.179488 442.666667C735.179488 413.211479 758.690278 389.333333 787.692307 389.333333 816.694338 389.333333 840.205129 413.211479 840.205129 442.666667 840.205129 472.121854 816.694338 496 787.692307 496 758.690278 496 735.179488 472.121854 735.179488 442.666667Z" p-id="487"></path></svg>&nbsp;{this.state.msg.commentsCount}</li><span style={{color:'#999',opacity:'.2',fontSize:'1.6em',paddingTop:'.3em'}}>|</span>
            <li style={{paddingRight:'.25rem',paddingTop:'.07rem'}}><svg className="icon" style={{width: '1.3em', height: '1.3em',verticalAlign: 'middle',fill: 'currentColor',overflow: 'hidden',color:'#999'}} viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="541"><path d="M471.86368 72.097804C485.674955 41.934476 493.044868 42.004821 506.088062 72.343455L619.745431 336.711942C625.163575 349.314613 639.967742 355.221257 652.81146 349.9048 665.655179 344.588341 671.674797 330.062018 666.256653 317.459345L552.599283 53.090859C522.392994-17.169354 457.679046-17.787043 425.817282 51.79791L306.603706 312.156098C300.890827 324.632819 306.56746 339.291488 319.282822 344.89715 331.998182 350.50281 346.937225 344.932715 352.650101 332.455991L471.86368 72.097804ZM946.32909 396.483296C979.832725 400.051098 982.041973 406.950494 956.666908 428.497651L735.550581 616.257899C725.009777 625.208591 723.85952 640.849199 732.981408 651.192177 742.103296 661.535153 758.043057 662.663823 768.583861 653.713133L989.700188 465.952885C1048.465438 416.052555 1029.066423 355.470148 951.775584 347.23945L662.585148 316.443567C648.726743 314.967787 636.273047 324.79504 634.769039 338.393355 633.265033 351.991667 643.28025 364.211635 657.138652 365.687415L946.32909 396.483296ZM789.29175 946.034577C796.186861 978.402929 790.182336 982.596644 761.456491 965.574886L511.141715 817.248614C499.208996 810.177775 483.693933 813.937557 476.487851 825.646327 469.281769 837.355095 473.113466 852.578978 485.046185 859.649818L735.36096 1007.97609C801.886172 1047.396203 854.610867 1010.571904 838.704265 935.9001L779.188324 656.509011C776.336237 643.120205 762.962797 634.535115 749.317907 637.333673 735.673018 640.132233 726.923723 653.254684 729.775808 666.643488L789.29175 946.034577ZM232.773805 963.365201C203.531582 979.802142 197.611334 975.494605 205.23285 943.427422L271.646138 663.996497C274.812115 650.675787 266.373538 637.358852 252.798046 634.252292 239.222554 631.145732 225.65091 639.425937 222.484932 652.746647L156.071644 932.177572C138.421236 1006.440873 190.405906 1044.264612 257.865924 1006.345598L510.273487 864.46829C522.369205 857.669333 526.55766 842.536203 519.628661 830.667492 512.699663 818.798784 497.277084 814.688939 485.181367 821.487893L232.773805 963.365201ZM129.994101 501.287629C82.102458 458.686274 82.102458 458.686274 42.192755 423.185148 31.865104 413.998327 15.903056 414.766027 6.540523 424.899851-2.82201 435.033675-2.039628 450.696151 8.288022 459.88297 48.197725 495.384098 48.197725 495.384098 96.089368 537.985451L223.800416 651.58906C234.128066 660.775881 250.090114 660.008181 259.452649 649.874357 268.815181 639.740533 268.0328 624.078057 257.705148 614.891236 225.777387 586.490334 225.777387 586.490334 129.994101 501.287629ZM180.395462 382.262878C190.366845 381.267631 200.661419 380.210295 211.223313 379.09885 236.673773 376.420659 262.52381 373.552395 287.435772 370.684164 296.155283 369.680247 304.136079 368.747883 311.210485 367.910867 315.461207 367.40794 318.460849 367.049069 320.067674 366.854942 333.902965 365.183369 343.73769 352.823061 342.034144 339.247426 340.330596 325.671791 327.733879 316.021643 313.898586 317.693216 312.350014 317.880324 309.374861 318.236267 305.16739 318.734078 298.144806 319.56496 290.21721 320.49111 281.552922 321.48867 256.796887 324.338946 231.109284 327.189188 205.840444 329.848269 195.367057 330.950398 185.163505 331.998385 175.286984 332.984164 154.745362 335.034432 135.924256 336.785406 119.20766 338.183706 105.318259 339.345517 95.018524 351.33562 96.202557 364.964348 97.386591 378.593077 109.606024 388.699509 123.495425 387.537698 140.511074 386.114383 159.598349 384.338647 180.395462 382.262878Z" p-id="542"></path></svg>&nbsp;<span style={{color:'#999',fontWeight:'900',fontSize:'.7em'}}>收藏</span></li>
          </ul> 
        </footer>
      </div>
    )
  }

}

export default Com
